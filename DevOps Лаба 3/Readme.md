# Лабораторная работа № 3

## Задание
* Написать “плохой” CI/CD файл, который работает, но в нем есть не менее пяти “bad practices” по написанию CI/CD
* Написать “хороший” CI/CD, в котором эти плохие практики исправлены

## Выполнили человеки
* Усольцева Дарья
* Забродский Александр
* Азатжонова Мехринисо

## Начинаем делать лабу
Мы, когда только открыли лабу и пытаемся понять, кто такие CI/CD:

<img src="https://github.com/user-attachments/assets/eb5500fe-d5f9-4847-a300-27ea27a2cf1a" width="350" />
<img src="https://github.com/user-attachments/assets/d5c14963-b23c-48a7-88f7-c07a398e13a8" width="350" />

## Выполнение лабы
Для начала разбираемся как писать CI/CD файл, узнаем про его структуру/компоненты.

### Bad practices
Рассмотрим файл CI/CD, в котором представлены "плохие практики", более подробно, чтобы для начала разобрать принцип  работы CI/CD. Первоначально мы задаем название пайплана, в нашем случае это `Bad practices in CI/CD`. Далее указываем триггеры(компонент `on`), то есть когда должнен запускаться CI/CD, например, при внесении изменений в ветку `main`:

![image](https://github.com/user-attachments/assets/7a5275a4-6972-4f29-a7e2-15fe29011621)

В `jobs` прописываем два основных задания: `build`,  `deploy`. 

#### Задание `build`
В данной задаче мы определяем операционную систему `ubuntu-latest`, на которой будет происходить выполенение. Далее описываем  отдельные шаги: `Checkout code`, отвечающий за актуальность кода, `Install dependencies`, устанавливающий все необходимые для работы библиотеки/пакеты из файла `package.json`, `Run tests` для тестирования на проверку логики всего приложения и, наконец, `Build application` для сборки приложения/подготовки к развертыванию:

![image](https://github.com/user-attachments/assets/4e9667da-33d8-4fa1-a90e-81815a29ef58)

#### Задание `deploy`
Аналогично с предыдущим заданием выполняется на системе `ubuntu-latest` и содержит шаг `Checkout code` для получения актуального кода. Шаг `Deploy application` содержит команду `./deploy.sh`, которая и выполняет скрипт развертывания приложения:

![image](https://github.com/user-attachments/assets/cab43622-6c67-4564-95a3-a14b5d0fc765)

Плохие практики, которые представлены в описанном выше файле:
1. Отсутствие этапов(`build` и `deploy` в одном `jobs`), что может привести к сложности отладки при возникновении ошибок или сложности изменения файла в определенных ситуациях, например, когда необходимо  не выполнять развертывание сразу
2. Отсутствие кеширования, что приводит к замедлению работы CI/CD за счет необходимости устанавливать библиотеки/пакеты заново каждый раз
3. Отсутствие зависимостей/связей между `build` и `deploy`, что может привести к запуску неподтвержденного кода, т.е. выполенению развертки после неудачного тестирования
4. Неоптимальное использование  команды `actions/checkout@v2`(повторяется 2 раза), что приводит к увеличению времени выполнения и требованию дополнительных ресурсов
5. Неопределенность окружения, в котором выполняется развертка, что может привести к сложности отслеживания проблем, возникновению проблем из-за несоответсвия настроек/версий

### Good practices



## Это мы отдыхаем

<img src="https://github.com/user-attachments/assets/2ddf8f26-99a0-4690-9840-278297445372" width="350" />


